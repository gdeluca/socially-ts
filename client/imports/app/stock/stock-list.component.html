<div>
  <div class="row">
    <h3 class="col-12 text-center">Stock y precios</h3>

    <div  class="form-inline">
      
      <fieldset class="form-group">
          <h4>Agrupar por:</h4>
          <div class="form-check">
            <label class="form-check-label">
              <input type="radio" class="form-check-input" name="optionsRadios" id="optionsRadios1" value="option1" checked (click)="doShowOperation(false)">
              Facturacion
            </label>
          </div>
          <div class="form-check">
          <label class="form-check-label">
              <input type="radio" class="form-check-input" name="optionsRadios" id="optionsRadios2" value="option2" (click)="doShowOperation(true)">
              Operaciones
            </label>
          </div>
      </fieldset>

      <div class=" ml-4 mt-4">
        <div class="form-check">
          <label class="form-check-label">
            <input type="checkbox" class="form-check-input" (click)="doShowStores(!showStores)" >
            Filtrar por sucursal
          </label>
        </div>
      </div>

      <div class=" ml-4 mt-4">
        <select 
          name="selectCategory" class="form-control" required  
          [(ngModel)]="selectedCategory">
          <option value="" disabled currentIndex hidden>Filtrar por Categoria</option>
          <option *ngFor="let category of categories | async" 
          [ngValue]="category._id">{{category.name}}</option>
        </select> 
      </div>

      <div class=" ml-4 mt-4">
        <select 
          name="selectCategory" class="form-control" required  
          [(ngModel)]="selectedSection">
          <option value="" disabled currentIndex hidden>Filtrar por Seccion</option>
          <option *ngFor="let section of sections | async" 
          [ngValue]="section._id">{{section.name}}</option>
        </select> 
      </div>

      <div class=" ml-4 mt-4">
        <input 
          type="text" 
          name="name" 
          class="form-control" 
          placeholder="Buscar por Codigo">
      </div>



    </div>

    <!-- table-responsive table-striped table-bordered table-hover -->
    <table class="table table-bordered table-hover ">
      <thead class="thead-default">
        <tr>
          <th class="text-center">Codigo</th>
          <th class="text-center">Descripcion</th>
          <th class="text-center">Color</th>
          <th class="text-center">Talle</th>
          <th class="text-center">Cantidad</th>
          <th class="text-center">Proveedor</th>
          <th class="text-center">Costo</th>
          <th class="text-center">Contado</th>
          <th class="text-center">Tarjeta</th>

          <th class="text-center" *ngFor="let store of stores">
            Stock ({{store.name}})
          </th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let stock of stocks">
          <td class="text-center"><a [routerLink]="['/product', product._id]">{{product.code}}</a></td>
          <td class="text-center">{{product.name}}</td>
          <td class="text-center">{{product.size}}</td>
          <td class="text-center">{{stock.buyAmount}}</td>
          <td class="text-center">${{stock.buyPrice}}</td>
          <ng-container *ngFor="let storeProduct of storeProducts"> 
            <ng-container *ngFor="let store of stores">
              <ng-container *ngIf="storeProduct.stockId == stock._id && storeProduct.storeId == store._id">
                <td class="text-center">{{storeProduct.amount}}</td>
              </ng-container>
            </ng-container>
          </ng-container>
          <ng-container *ngFor="let storeProduct of storeProducts"> 
            <ng-container *ngFor="let store of stores">
              <ng-container *ngIf="storeProduct.stockId == stock._id && storeProduct.storeId == store._id">
                <td class="text-center">${{storeProduct.priceCash}}</td>
              </ng-container>
            </ng-container>
          </ng-container>
          <ng-container *ngFor="let storeProduct of storeProducts"> 
            <ng-container *ngFor="let store of stores">
              <ng-container *ngIf="storeProduct.stockId == stock._id && storeProduct.storeId == store._id">
                <td class="text-center">${{storeProduct.priceCard}}</td>
              </ng-container>
            </ng-container>
          </ng-container>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="row"><hr></div>
  <div class="row">
    <div class="col span2">
      <a class="btn btn-block btn-info" routerLink="/stock/create" routerLinkActive="active">Cargar stock</a>
    </div>
  </div>

</div>